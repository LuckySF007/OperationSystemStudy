# 병행제어 - 01

## 데이터의 접근

연산을 할때는 데이터를 어디서 가져와서 연산을 하고 연산결과를 다시 돌려주는 식으로 함

| 연산 | 저장공간 |
| --- | --- |
| cpu | memory |
| 컴퓨터 내부 | 디스크 |
| 프로세스 | 그 프로세스의 주소공간 |

<br>

## Race Condition

- 여러 프로세스들이 동시에 공유 데이터를 접근하는 상황
- 저장공간을 공유하는 연산 주체가 여럿 있는 경우에 생길 가능성. ex) 멀티프로세서 시스템 : 공유 메모리를 사용하는 프로세스들이 커널 내부 데이터를 접근하는 루틴들 간에 발생
- OS에서 race condition 발생 원인
    - 커널 수행 중 인터럽트 발생 시 → 인터럽트 disable, enable로 커널 수행중에 인터럽트가 들어오는것을 막도록 해결
    - 프로세스가 시스템콜을 하여 커널 모드로 수행중인데 문맥교환이 일어나는 경우(다른 프로세스가 선점하여 커널 모드의 데이터를 건드림) → 커널 모드에서 수행중일 때는 cpu를 선점하지 않도록 하고 커널모드에서 사용자 모드로 돌아갈 때 선점하도록 해결
    - 멀티프로세서에서 공유메모리 내의 커널 데이터 → 한번에 하나의 cpu만 커널에 들어갈 수 있도록 해결 or 커널 내부에 있는 각 공유 데이터에 접근할때마다 그 데이터에 대한 lock/unlock 을 하여 해결
    

<br>

## 프로세스 동기화 문제

- 공유 데이터의 동시 접근은 데이터의 불일치 문제를 발생
- 일관성 유지를 위해서는 협력 프로세스 간의 실행 순서를 정해주는 메커니즘 필요
- Race condition : 여러 프로세스들이 동시에 공유 데이터를 접근, 데이터의 최종 연산 결과는 마지막에 그 데이터를 다룬 프로세스에 따라 달라짐
- Race condition 을 막기 위해서는 concurrent process는 동기화되어야함

<br>

## Critical-Section(임계 구역) 문제

- n개의 프로세스가 공유 데이터를 동시에 사용하길 원하는 경우
- 각 프로세스의 code segment에는 공유 데이터를 접근하는 임계구역이 존재
- 하나의 프로세스가 임계구역에 있을 때 다른 모든 프로세스가 임계구역에 들어갈 수 없어야함